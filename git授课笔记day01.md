# git第一天

## 概念阶段

### 版本管理的重要性

回忆一下大学写毕业论文的时候，每次修改都会备份之前的内容，然后进行修改，这个过程就是版本的迭代过程；而每次备份的文件为了区分，都会给它取一个名字用来标识，这个名字就是版本号 

![file_version.e408b249](./images/file_version.e408b249.png)

弊端：操作麻烦，命名不规范，容易丢失，协作困难



### 版本管理系统的类型

#### 3种类型

1. 本地式：自己电脑保存。

   - 代表和运作方式：手动操作
   - 优点：单机运行
   - 缺点：操作麻烦，命名不规范，容易丢失，协作困难

2. 集中式：服务器统一管理。

   - 代表和运作方式：svn-----只保留最新版本，对比出差异、记录差异。
   - 优点：多人协作
   - 缺点：需要网络、性能差（切换慢）、服务器奔溃后无法工作

3. 分布式：每一个电脑都拥有完整

   - 代表和运作方式：git-----保留所有完整版本。
   - 优点：多人协作、断网运行、性能好（切换快）、主流
   - 缺点：占用磁盘（记录所有版本）

#### svn和git区别

1. svn：只保留最新版本，对比出差异、记录差异。

   ![svn_diff.a6d27430](.\images\svn_diff.a6d27430.png)

2. git 保留所有完整版本。

   ![git_diff.33019b88](.\images\git_diff.33019b88.png)

#### 总结：

​	git和svn 牺牲空间换取时间



### git的三个区域和工作流程



![git_region_example.8cd38b42](.\images\git_region_example.8cd38b42.png)

#### 三个区域

1. 工作区
2. 暂存区
3. Git仓库

#### 工作流程

工作区->暂存区->Git仓库

正在写->暂时写完了->保存起来

## 准备阶段

### 安装和检验git

- 下载

  ![git_download.c9f778ee](.\images\git_download.c9f778ee.png)

- 安装（傻瓜式下一步即可）

- 校验（鼠标右键，存在git bash here即可）

![gitbash](.\images\gitbash.png)

注意：安装了桌面应用的可能无法右击打开git bash here

### 配置全局用户信息和检查

- 配置：全局配置（首次配置即可）

  ```
  git config --global user.name "yijun"
  git config --global user.email "yijun@itcast.cn"
  ```


- 检验：

  ```
  git config --list --global
  或
  git config user.name
  git config user.email
  或
  在电脑C:\Users\电脑名字 查看 .gitconfig 文件 中间就存储了用户名和密码
  ```


## 操作阶段（核心）

### 初始化git

##### 命令：

```js
git init
```

##### 意义: 

让git接管项目，管理代码

##### 注意：

1. 一个项目只需要执行一次，多次会覆盖
2. 一个项目中只能出现一次，不可以嵌套管理
3. 一个项目中的.git文件不可以移动

### 查看状态

##### 命令：

```js
git status
或者
git status -s 
```

##### 意义: 

查看git接管项目文件的状态（初步理解）

1. 红色字体-文件代码在工作区
2. 绿色字体-文件代码在暂存区
3. working tree clean-文件代码在git仓库区

##### 注意：

1. -s 是简写提示信息更加简洁

### 提交至暂存区

##### 命令：

```js
git add 文件名
git add .
```

##### 意义: 

完成代码工作，把文件保存至暂存区

##### 注意：

1. 可以一次添加一个文件也可以一次添加所有

### 提交至git仓库

##### 命令：

```js
git commit -m '描述本次提交的内容'
```

##### 意义: 

将提交至暂存区的代码，进一步提交至Git仓库，记录工作进度和细节

##### 注意：

1. 每次提交的描述非常重要，会做为代码迭代的记录和凭证（后续会用到）

2. 如果不是新增文件，可以直接将文件从工作区提交到git仓库 代码为

   ```js
   git commit -am '描述本次提交的内容'
   ```

3. git status状态的进一步理解
   新增、修改、删除的操作本质一样

   1. 红色字体-文件代码在工作区---新增、修改、删除和git仓库不一致的都现实红色字体
   2. 绿色字体-文件代码在暂存区---新增、修改、删除被git跟踪并添加至暂存区后都会显示绿色字体
   3. working tree clean-文件代码在git仓库区---新增、修改、删除提交到git仓库之后都显示空（干净）

### 查看已经提交的版本

##### 命令：

```js
// 查看之前所有版本
git log
// 查看最近2条的版本
git log -2
// 简介模式查看最近2条的版本
git log -2 --pretty=oneline
```

##### 意义: 

查看每次提交至git仓库的记录

##### 注意：

1. 退出查看记录用  `q`
2. git log 只能查看时间轴中当前时间点之前的版本信息
3. git reflog 可以能查看时间轴中的所有版本信息



### 回退版本

##### 命令：

```js
git reset --hard 版本id
```

##### 意义: 

回退至任意版本

## 异常操作节点

### .gitignore 忽略提交文件

##### 概念：

如果项目中出现某些不想提交的文件，可以将其忽略掉

##### 步骤：

1. 项目根目录中创建  `.gitignore`文件

2. 在`.gitignore`文件中填写想被忽略的文件名称

   ```
   # 提交忽略的名单（白名单）
   # 前面有#号说明此条为注释
   # 下面是忽略 小秘密.txt 这个文件
   小秘密.txt
   # 下面是忽略 秘密/ 这个文件夹中的所有内容
   秘密/
   # 以后可以配合更多的正则表达式使用，目前不讲
   ```


### 撤销对文件的修改

##### 命令：

```js
// 撤销对文件的修改
git checkout --文件名
// 撤销对所有文件的修改
git checkout -- .
```

##### 意义: 

修改了某个不应该修改的文件，突然想撤回，类似于ctrl+z

##### 注意：

1. 撤销命令本质是将git仓库覆盖原文件，所以存在一定风险
2. 状态从红变没

### 撤销对文件的暂存

##### 命令：

```js
// 撤销已暂存的文件回工作区
git reset HEAD -- 文件名
// 撤销所有已暂存的文件回工作区
git reset HEAD -- .
```

##### 意义: 

提交了某个不应该提交的文件，突然想撤回提交操作，类似于ctrl+z

##### 注意：

1. 在查看版本信息中就会没有该条记录
2. 状态从绿变红

